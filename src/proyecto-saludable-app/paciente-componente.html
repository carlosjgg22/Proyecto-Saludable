<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="paciente-componente-registro">
  <template>
  
    <main class="registrar-paciente">
            <div>
                <h1>Ingrese Datos del Paciente</h1>
                <br><label class="lb-dni">DNI:</label><input class="input-dni" type=text id="dni" value="{{dni::input}}">
                <br><label class="lb-nombre">Nombre:</label><input class="input-nombre" type="text" id="nombre" value="{{nombre::input}}">
                <br><label class="lb-apellido">Apellido:</label><input class="input-apellido" type="text" id="apellido" value="{{apellido::input}}">
                <br> <label class="lb-edad">Edad:</label><input class="input-edad" type="number" id="edad" value="{{edad::input}}">
                    
                <br><label class="lb-sexo">Sexo</label>
                
                <select value="{{sexo::input}}" id="sexo">
                    <option selected >Seleccione</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Otro">Otro</option>
                  </select>
              
                <br> <label class="lb-fecha">Fecha Nacimiento:</label><input type="date"  class="input-fecha" id="fecha" value="{{fecha_nacimiento::input}}">
                <br> <label class="lb-localidad">Localidad:</label><input class="input-localidad" type=text id="localidad"  value="{{localidad::input}}">
                <br> <label class="lb-User">User:</label><input class="input-user" type=text id="user"  value="{{user::input}}">
                <br> <label class="lb-password">Password:</label><input class="input-password" type=password id="password"  value="{{password::input}}">

                <br><label class="lb-tratamiento">Tipo de tratamiento</label>
                <select value="{{tratamiento::input}}" id="tratamiento">
                    <option selected >Seleccione Tratamiento</option>
                    <option value="Obesidad">Obesidad</option>
                    <option value="Bulimia">Bulimia</option>
                    <option value="Anorexia">Anorexia</option>
                  </select>
                  
            </div>

            <br> <button class="btn-registrar" on-click="registrarPaciente">Registrar!</button>
        
        </main>
    <style>
      .registrar-paciente{
     text-align: center;
    background-color:#e2f2ff;
    font-family: 'Krub', sans-serif;
    width: 100%;
    height: 75%;
    position:absolute;
    top:96px;
    bottom: 100px;
      }

#dni, #nombre, #apellido, #sexo, #edad, #tratamiento, #user, #password,#localidad, #fecha{
    padding:2px;
        border: solid 1px #ccc; 
        width:15%;
        border-radius: 20px;
        font-family: 'Krub', sans-serif;
        font-size: 15px;
        margin-top: 5px;
        margin-left: 10px;
        color: black;
        }
      
.btn-registrar{
 
      padding:15px;
        border: solid 1px #ccc; 
        width:20%;
        border-radius: 10px;
        font-family: 'Krub', sans-serif;
        font-size: 20px;
        color: black;

}
    </style>
    
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class PacienteComponente extends Polymer.Element {
      static get is() { return 'paciente-componente-registro'; }
      static get properties() {
          return{
            pacientes:{
                type:Object,
                value:()=>{
                    return{
                        id:Number,
                        dni:Number, 
                        nombre: String,
                        apellido:String,
                        edad:Number,
                        sexo:String,
                        fecha_nacimento:Date,
                        localidad:String,
                        tratamiento:String,
                        user:String,
                        password:String
                    }
                }
            },

            pacientesRegistrados:{
                    value(){
                        return[
                        ];
                    }
                    }, 

          }
        };

        registrarPaciente(){
var condicion=false;

  let auxiliar={
                dni: this.dni, 
                nombre:this.nombre,
                apellido:this.apellido, 
                edad:this.edad, 
                sexo:this.sexo,
                fecha:this.fecha_nacimento,
                localidad:this.localidad, 
                tratamiento:this.tratamiento,
                user:this.user,
                password: this.password  
            };

if(this.dni,this.nombre,this.edad,this.sexo,this.fecha_nacimento,this.localidad,this.tratamiento,this.password==undefined){
            alert("Debe Ingresar todos los datos del paciente")
}else{
if(this.pacientesRegistrados.length<=0){
  this.push('pacientesRegistrados',auxiliar) 
  console.log(this.pacientesRegistrados)

}
/*
else{

  this.pacientesRegistrados.forEach(element => {
  console.log("estoy aqui dentro del for")
  if(element.user==auxiliar.user){
    this.condicion=true;
    alert('El usuario '+this.user+'ya esta asignado a otro paciente')
  }


});
 
  console.log(this.condicion)
  if(!this.condicion){
  this.push('pacientesRegistrados',auxiliar)
}
 */
  
  
//console.log(this.pacientesRegistrados)



            //guardo los registros en local storage

     var listaJson= JSON.stringify(this.pacientesRegistrados); 
            localStorage.setItem("listapacientes", listaJson);

  }   
} 
    
    }
    
    window.customElements.define(PacienteComponente.is, PacienteComponente);
  </script> 
</dom-module>
