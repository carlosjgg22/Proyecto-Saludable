<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="stylesheet" href="/src/proyecto-saludable-app/paciente-componente.html">

<dom-module id="login-componente-input">
    <template>
     <main class="main">
         <section>
             <div class="login">
                <div class="inputs-container">
                 <br>User: <input type="text" class="input-name" name="input-user" value="{{usuario::input}}" required >
                 <br>Password:<input type="password" class="input-password" name="input-password" value="{{password::input}}" required >   
                </div>                 
             </div>
            <button class="btn-singup" class="input-name" on-click="validarUsuario"> SingUP</button> 
             
         </section>
     </main>
      
    
  
    <style>
    
 .main{
     margin-top: 35px;
    text-align: center;
    background-color:#e2f2ff;
    font-family: 'Krub', sans-serif;
    width: 100%;
    height: 75%;
    position:absolute;
         
 }

 
 .btn-singup, .input-name{
        padding:2px;
        border: solid 1px #ccc; 
        width:15%;
        border-radius: 20px;
        font-family: 'Krub', sans-serif;
        font-size: 15px;
        
        margin-top: 70px;
        margin-left: 30px;
        color: black;
        
}

.input-password{
        padding:2px;
        border: solid 1px #ccc; 
        width:15%;
        border-radius: 20px;
        font-family: 'Krub', sans-serif;
        font-size: 15px;
        margin-top: 20px;
        margin-left: 10px;
        color: black;
} 

.btn-singup{
        padding:5px;
        border: solid 1px #ccc; 
        width:10%;
        border-radius: 20px;
        font-family: 'Krub', sans-serif;
        font-size: 20px;
        margin-top: 50px;
        color: black;
        
}

    
    </style>
    </template>
    <script>
     
      class LoginComponentInput extends Polymer.Element {
        static get is() { return 'login-componente-input'; }
        static get properties() {
          return {
            user:{
                type:Object,
                value:()=>{
                    return{
                        usuario:String,
                        password:String,
                    }
                }
            },
            };
          
        }
          validarUsuario(){
          ///obtengo la lista de pacientes registrados desde el componente pacientes
          //y la paso una lista de objetos
           

           if(this.usuario==undefined||this.password==undefined){
            alert("Debe Ingresar datos de usuario vÃ¡lidos")
           }else{
            var nuevo=JSON.parse(localStorage.getItem("listapacientes"));
          
            nuevo.forEach(element =>{
                if(element.user==this.usuario && element.password==this.password){
                   
                    
                    var usuarioLogueado= JSON.stringify(this.user); 
                    localStorage.setItem("listalogueo", usuarioLogueado);

                    window.location.assign("/src/proyecto-saludable-app/registrardieta.html")
                    alert("Bienvenido!")
                }
               
                }
               
                
                );
                 
          }


        }
      }
      
  
      window.customElements.define(LoginComponentInput.is, LoginComponentInput);
    </script>
  </dom-module>
  